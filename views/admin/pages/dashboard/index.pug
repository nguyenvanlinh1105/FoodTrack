extends ../../layouts/default.pug

block content
    .container-fluid.mt-4
        //- // Page Heading
        .d-sm-flex.align-items-center.justify-content-between.mb-4
            h1.h3.mb-0.text-gray-800 <strong>Trang chủ</strong>
            a.d-none.d-sm-inline-block.btn.btn-sm.btn-primary.shadow-sm(href='#')
                i.fas.fa-download.fa-sm.text-white-50
                |  Tạo file PDF

        //- // Content Row
        .row
            //- // Earnings (Monthly) Card Example
            .col-xl-3.col-md-6.mb-4
                .card.border-left-primary.shadow.h-100.py-2
                    .card-body
                        .row.no-gutters.align-items-center
                            .col.mr-2
                                .text-xs.font-weight-bold.text-primary.text-uppercase.mb-1
                                    | Tổng số đơn hàng dự kiến (Ngày)
                                .h5.mb-0.font-weight-bold.text-gray-800 #{totalOrdersDate}
                            .col-auto
                                i.fas.fa-receipt.fa-2x.text-gray-300

            //- // Earnings (Annual) Card Example
            .col-xl-3.col-md-6.mb-4
                .card.border-left-success.shadow.h-100.py-2
                    .card-body
                        .row.no-gutters.align-items-center
                            .col.mr-2
                                .text-xs.font-weight-bold.text-success.text-uppercase.mb-1
                                    | Tổng số tiền dự kiến (Ngày)
                                .h5.mb-0.font-weight-bold.text-gray-800 #{totalMoneyDate}
                            .col-auto
                                i.fas.fa-dollar-sign.fa-2x.text-gray-300

            //- // Tasks Card Example
            .col-xl-3.col-md-6.mb-4
                .card.border-left-info.shadow.h-100.py-2
                    .card-body
                        .row.no-gutters.align-items-center
                            .col.mr-2
                                .text-xs.font-weight-bold.text-info.text-uppercase.mb-1
                                    | Tổng số đơn hàng dự kiến (Tháng)
                                .row.no-gutters.align-items-center
                                    .col-auto
                                        .h5.mb-0.mr-3.font-weight-bold.text-gray-800 #{totalOrdersMonth}
                            .col-auto
                                i.fas.fa-receipt.fa-2x.text-gray-300

            //- // Pending Requests Card Example
            .col-xl-3.col-md-6.mb-4
                .card.border-left-warning.shadow.h-100.py-2
                    .card-body
                        .row.no-gutters.align-items-center
                            .col.mr-2
                                .text-xs.font-weight-bold.text-warning.text-uppercase.mb-1
                                    | Tổng số tiền dự kiến (Tháng)
                                .h5.mb-0.font-weight-bold.text-gray-800 #{totalMoneyMonth}
                            .col-auto
                                i.fas.fa-dollar-sign.fa-2x.text-gray-300
    .container-fluid.mt-4
        div(style="")
            ul(id="commonLegend" style="display:flex;list-style: none; padding: 0; margin: 0;")
        div
            canvas(id="myChart" style="width: 100% !important; max-width:300px; height:300px")

    script(src="https://cdn.jsdelivr.net/npm/chart.js")

    script.
        const labels=[
            {
                title:'Đang xử lý',
            },
            {
                title:'Đã xác nhận'
            },
            {
                title:'Đang giao'
            },
            {
                title:'Hoàn thành',
            },
            {
                title:'Đã hủy',
            },
        ];
        const colors = [
            'rgba(255, 99, 132, 0.6)', // Đang xử lý
            'rgba(54, 162, 235, 0.6)', // Đã xác nhận
            'rgba(255, 206, 86, 0.6)', // Đang giao
            'rgba(75, 192, 192, 0.6)', // Hoàn thành
            'rgba(153, 102, 255, 0.6)' // Đã hủy
        ];
        const emptyColor = 'rgba(128, 128, 128, 0.6)'; // Màu xám cho dữ liệu trống
        
        const ctx = document.getElementById('myChart');

        const commonLegend = document.getElementById('commonLegend');
        labels.forEach((label, index) => {
            const legendItem = document.createElement('li');
            legendItem.style.display = 'flex';
            legendItem.style.alignItems = 'center';
            legendItem.style.marginRight = '10px';
            legendItem.innerHTML = `
                            <span style="display:inline-block; width:15px; height:15px; background-color:${colors[index]}; margin-right:8px;"></span>
                            ${label.title}
                        `;
            commonLegend.appendChild(legendItem);
        });